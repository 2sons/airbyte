documentationUrl: https://docsurl.com
connectionSpecification:
  $schema: http://json-schema.org/draft-07/schema#
  title: Debug Spec
  type: object
  required:
    - messages
    - exit_code
    - catalog
  properties:
    exit_code:
      type: integer
      title: Exit Code
      description: The exit code to exit with
      default: 0
    catalog:
      type: string
      multiline: true
      title: Catalog
      description: The catalog this source emits
      default: |
        {
          "streams": [
            {
              "name": "users",
              "json_schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer"
                  },
                  "name": {
                    "type": "string"
                  }
                }
              },
              "supported_sync_modes": [
                "full_refresh",
                "incremental"
              ],
              "source_defined_cursor": true,
              "default_cursor_field": [
                "id"
              ],
              "source_defined_primary_key": [[
                "id"
              ]]
            }
          ]
        }
    messages:
      type: array
      title: Messages
      description: The messages this source emits
      items:
        type: object
        title: Message
        required:
          - text
        properties:
          text:
            type: string
            title: JSONL
            multiline: true
            description: The message as JSONL. Each line is parsed at JSON
            examples:
              - '{ "type": "RECORD", "record": { "stream": "users", "data": { "id": 1, "name": "john" } }, "emitted_at": 1625383200000 }'
              - '{ "type": "LOG", "log": { "level": "ERROR", "message": "An error" }, "emitted_at": 1625383200000 }'
              - '{ "type": "STATE", "state": { "state_type": "STREAM", "stream": { "stream_descriptor": {"name": "users"}, "stream_state": {"last_updated_at": "2020-01-02T00:00:00Z"} } }, "emitted_at": 1625383200000 }'
            default: '{"type": "RECORD", "record": {"stream": "users", "data": {"id": 1, "name": "john"}, "emitted_at": 1625383200000}}'
